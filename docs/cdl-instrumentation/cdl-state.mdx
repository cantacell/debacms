---
sidebar_label: State
sidebar_position: 4
id: State
toc_min_heading_level: 2
toc_max_heading_level: 4
---

## Update the Data Layer's State

**Any** push into `coxAutoDataLayer` updates the data layer's state.

```js title='Example:'
coxAutoDataLayer.push({abc: 123})
console.log(coxAutoDataLayer.getState().abc) // 123
```

Another example:

Current state:

```js title='Example:'
{
  'application': {
    'componentId': '123456',
    'version': '1.0',
    'isProduction': false
  }
}
```

:::note
Some fields will be added
<span style={{fontStyle: 'italic'}}>[**automatically**](./autogenerated-fields.mdx) to the state.</span>
:::



New data layer push:

```js
coxAutoDataLayer.push({
  application: {
    name: 'my application name'
  }
});
```

New state:

```js
{
  'application': {
    'componentId': '123456',
    'version': '1.0',
    'isProduction': false,
    'name': 'my application name'
  }
}
```

## Remove a persisted state field

To remove a persisted state field it is enough to make a data layer push with `undefined` as the value of the field interested to be removed:

Current state:

```js
{
  'application': {
    'componentId': '123456'
  },
  vehicle: {
    make: 'Subaru'
  }
}
```

Removing vehicle field:

```js
coxAutoDataLayer.push({
  vehicle: undefined
});
```

New state:

```js
{
  'application': {
    'componentId': '123456'
  }
}
```

## Reset the Data Layer's State

Removes all the fields, and re-run the process of initialization of the state.

Current state:

```js
{
  'application': {
    'componentId': '123456'
  },
  vehicle: {
    vehicleMake: 'Subaru'
  },
  testField: 'test',
}
```

Reseting state:

```js
coxAutoDataLayer.resetState();
```

New state:

```js
{
  'application': {
    'componentId': '123456'
  }
}
```

## Retrieve current Data Layer's State

To retrieve the current Data Layer's State use the `coxAutoDataLayer.getState` function. It will return a copy of the state.

Example:

Current state:

```js title='Example:'
{
  'application': {
    'componentId': '123456',
    'version': '1.0',
    'isProduction': false
  }
}
```

Invoking `coxAutoDataLayer.getState` it will return:

```js
{
  'application': {
    'componentId': '123456',
    'version': '1.0',
    'isProduction': false
  }
}
```
